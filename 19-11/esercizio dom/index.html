<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Index</title>
    <style>
  .nascosto {
    display: none;
  }
</style>

  </head>
  <body>
    <h1>Benvenuto</h1>
    <input type="text" placeholder="Digita qualcosa" />
    <button>Aggiungi</button>
    <button id="empty">Svuota Lista</button>
    <p id="messaggio">Nessuna Attività Inserita</p>
    <ul class="lista"></ul>
    <select id="filtro">
    <option value="all">Mostra tutto</option>
    <option value="completata">Mostra solo completati</option>
</select>
    <script>
      const content = document.querySelector("input");
      const Add = document.querySelector("button");
      const list = document.querySelector(".lista");
      const filter = document.getElementById("filtro");
      filter.addEventListener("change", function(){
        const elements = document.querySelectorAll("li");
        const value = filter.value;
        for (let i = 0; i<elements.length; i++){
            const li = elements[i];
            if (value === "completata"){
                if (li.classList.contains("completata")) {
        li.classList.remove("nascosto");
      } else {
        li.classList.add("nascosto");
      }
    } else {
      li.classList.remove("nascosto");
    }
  }
      });
      Add.addEventListener("click", function () {
        const newElement = document.createElement("li");
        newElement.textContent = content.value;
        newElement.style.cssText = "cursor: pointer";
        const buttonRemove = document.createElement("button");
        buttonRemove.textContent = "X";
        buttonRemove.classList.add("rimuovi");
       if (content.value.trim() === "") {
       updateMessage(); 
       return;
       }
        buttonRemove.addEventListener("click", function () {
          newElement.remove();
          updateMessage();
        });
        newElement.addEventListener("click", function () {
          newElement.classList.toggle("completata");
          newElement.style.cssText ="color: gray; text-decoration:line-through";
        });
        newElement.ondblclick = function () {
          newElement.classList.toggle("evidenziata");
          newElement.style.cssText = "background-color: orange";
        };
        function updateMessage() {
          const dataInput = document.querySelectorAll("li");
          const message = document.getElementById("messaggio");
          if (dataInput.length == 0) {
          message.textContent = "Nessuna Attività Inserita";
         } else {
         message.textContent = "";
        }
        }
        const emptyList = document.getElementById("empty")
        emptyList.addEventListener("click", function(){
            list.innerHTML="";
            updateMessage();
        })
        newElement.appendChild(buttonRemove);
        list.appendChild(newElement);
        content.value = "";
        updateMessage();
      });
    </script>
  </body>
</html>
